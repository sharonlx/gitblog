<!DOCTYPE html>
<html>
<head>
  <!--
    **
    *
    * Author:         PIZn
    * Contact:        pizner@gmail.com
    * Theme Name:     Block Rude
    * Version:        1.0
    *
    **
  -->
  <meta charset="utf-8" />
  <title>Javascript domReady | D大调较交响乐</title>
  <meta name="generator" content="Jekyll" />
  <meta name="author" content="sharonlx" />
  <meta name="description" content="" />
  <link rel="stylesheet" href="/gitblog/css/style.css" type="text/css" />
  <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
  <link rel="shortcut icon" href="/blog/favicon.ico" type="image/x-icon" />
</head>
<body>
    <header class="head">
	<div class="header fn-clear">
		<section class="header-cnt fn-clear">
			<div class="logo">
				<div class="logo-cnt">
				 	<h1><a href="//gitblog">D大调交响乐</a></h1>
				 	<h2>年年不忘必有回响</h2>
				</div>
			</div>
			<nav class="nav">
				<ul>
					<li><a href="/gitblog" >首页</a></li>
					<li><a href="/gitblog/archives.html" >归档</a></li>
					<li><a href="/gitblog/contact.html" >关于</a></li>
					<li><a href="/gitblog/atom.xml" target="_blank" >订阅</a></li>
				</ul>
			</nav>
		</section>
	</div>
</header> 
  <section id="content">
    <article id="contenter">
      <section class="content">
	<div class="content-cnt fn-clear">
		<div class="main fn-clear">
			<article class="entry">
				<h1 class="title">Javascript domReady</h1>
               	<p class="meta"><time class="date" pubdate="2014-06-09">09 Jun 2014</time> By <a href="/contact.html" class="author" title="author">sharonlx</a><g:plusone size="small"></g:plusone></p>
               	<p class="description"></p>
 			 	<h3>domready详解</h3>

<p>参考
<a href="http://www.alloyteam.com/2014/03/effect-js-css-and-img-event-of-domcontentloaded/">JS、CSS以及img对DOMContentLoaded事件的影响</a>、<a href="http://www.cnblogs.com/hh54188/archive/2013/03/01/2939426.html">从onload和DOMContentLoaded谈起</a></p>

<ul>
<li><h4>DOMContentLoaded 和 onload</h4></li>
</ul>


<p>很多框架都自带时间domready,然后其他初始化的逻辑都放在这个事件的回调函数中。在说这个事件之前，我们先来说说<em>document</em> 的 <em>DOMContentLoaded</em> 和 <em>window</em> 的<em>onload</em>两个事件</p>

<p>**PS: onload方法是所有具有src属性的标签公有的事件，比如<em>img</em>、<em>script</em>、<em>window</em>、<em>iframe</em>、<em>embed</em></p>

<p>**PS: <em>document.readyState</em> 有如下几种状态：</p>

<table>
<thead>
<tr>
<th>状态 </th>
<th>描述 </th>
<th> 其他</th>
</tr>
</thead>
<tbody>
<tr>
<td>uninitialized</td>
<td> XML对象被产生，但是没有任何文件被加载</td>
<td>暂无法出现</td>
</tr>
<tr>
<td>loading</td>
<td> 加载其他资源，但是文档尚未开始解析</td>
<td> DOMContentLoaded事件触发之前文档的状态</td>
</tr>
<tr>
<td>interactive</td>
<td>除了image、flash、或者子frame这些资源未加载意外，其他资源都请求，并且标签已经全部解析好</td>
<td>DOMContentLoaded事件触发后，onload事件触发前</td>
</tr>
<tr>
<td>completed</td>
<td>文档的全部资源已经加载完毕</td>
<td>window.onload事件触发后</td>
</tr>
</tbody>
</table>


<p><em>DOMContentLoaded</em> 事件默认情况下，不会等待样式表、图片和子页面的加载，而是当外链脚本全部执行完毕后就触发<em>DOMContentLoaded</em>时间。此时<em>document</em>对象的<em>readyState</em>值为<em>interactive</em>。</p>

<p>**PS:但是当script标签前有link标签来外链一个样式表时，无论实在head中还是body中，都会阻塞当前script的执行，script脚本会等待样式表加载完毕后再执行。</p>

<p>**PS:浏览器会同时请求css和js，但是会等到css加载完毕后在执行js</p>

<p>**PS:火狐浏览器即使script写在link标签前，也会先加载样式，然后再执行script</p>

<p>当页面的所有资源都加载完毕后，会触发<em>window.onlaod</em>事件， 此时<em>document</em>对象的<em>readyState</em>值为<em>completed</em></p>

<ul>
<li><h4>jQuery的dom ready</h4></li>
</ul>


<p>首先根据<em>document.readyState</em>判断，是否为<em>completed</em></p>

<p>对非IE浏览器，挂载<em>DOMContentLoaded</em> 和 降级处理的 <em>load</em> 事件。</p>

<p>对于IE浏览器，由于有些属性，是必须在DOM解析完毕后才具有的，例如<em>doScroll</em>所以可以轮训的判断改属性是否已有值</p>

                <nav class="pagination-link">
                    
                    <a class="prev" href="/html/2014/06/04/HTML.html" rel="bookmark">&laquo;&nbsp;Html结构</a>
                    
                    
                    <a class="next" href="/2014/06/17/clientHeight-height-offsetHeight.html" rel="bookmark">Clientheight Height Offsetheight&nbsp;&raquo;</a>
                    
                 </nav>
			</article><!-- .entry -->		
		</div>
		<div class="aside fn-clear">
			<div class="box fn-clear">
	<img src="/gitblog/images/psb.jpg" alt="about theme"/>
	<p></p>
</div>
		</div>
	</div>
</section>
    </article>
  </section>
    <footer class="foot">
	<div class="foot-cnt fn-clear">
		<div class="foot-cnt-det fn-clear">
			<article class="blogroll">
				<h4 class="title">友情链接</h4>
				<!-- <ul>
					<li>&#8227;<a href="http://github.com/sharonlx">www.pizn.me</a></li>
					<li>&#8227;<a href="http://www.pizn.net">www.pizn.net</a></li>
					<li>&#8227;<a href="http://www.jekyllrb.com">www.jekyllrb.com</a></li>
				</ul> -->
			</article>
			<article class="about">
				<h4 class="title">关于我</h4>
				<p></p>
			</article>
			<article class="follow">
				<h4 class="title">关注</h4>
				<ul>
					<li><a href="https://github.com/sharonlx" class="ico-github" target="_blank">github</a></li>
					<li><a href="/atom.xml" class="ico-rss" target="_blank">rss</a></li>
					<!-- <li><a href="#" class="ico-linkedin">linkedin</a></li> -->
					<li><a href="mailto:ixuan.lee@gmail.com" class="ico-google">google</a></li>
					<!-- <li><a href="#" class="ico-flickr">flickr</a></li> -->
					<!-- <li><a href="" class="ico-twitter">twitter</a></li> -->
					<!-- <li><a href="#" class="ico-facebook">facebook</a></li> -->
					<!-- <li><a href="#" class="ico-vimeo">vimeo</a></li> -->
				</ul>
			</article>
		</div>
	</div>
	<div class="foot-btn">
		<div class="foot-btn-det">
			<p class="copyright">Copyright © 2011–2012 PIZn All rights reserved.</p>
			<p class="author">Powered by <a href="http://www.jekyllrb.com">Jekyll</a>. Design by <a href="http://www.pizn.net">PIZn</a>.</p>
		</div>
	</div>
</footer>
</body>
</html>

